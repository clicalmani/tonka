- [Introduction](seeding?id=introduction)
- [Writing Seeders](seeding?id=writing-seeders)
- [Using Model Factories](seeding?id=using-model-factories)

## Introduction

Database seeding in **Tonka** refers to the process of populating a database with an initial set of data. This is typically done to provide a baseline dataset that can be used for development, testing, or demonstration purposes. Seeding ensures that the database has the necessary data to function correctly and allows developers to work with a consistent dataset across different environments.

In **Tonka**, database seeding can be automated by specifying `--seed` option to `migrate:fresh` command or by running `db:seed` command after a migration. This process can include adding default values, creating sample records, or importing data from external sources. By using database seeding, developers can save time and reduce errors by avoiding the need to manually enter data each time the database is set up.

## Writing Seeders

**Tonka** seeders are classes that implement the `Clicalmani\Database\Seeders\Seeder` class. These seeders can be generated by running the `make:seeder` command in the console.

For example, to create a seeder for users, you would run the following command:

```bash
php artisan make:seeder UsersSeeder
```

This command will generate a new seeder class in the `database/seeders` directory. You can then customize this class to insert the desired data into the database. Here is an example of what the `UsersSeeder` class might look like:

```php
<?php

namespace Database\Seeders;

use Clicalmani\Database\Seeders\Seeder;
use Clicalmani\Foundation\Support\Facades\DB;

class UsersSeeder extends Seeder
{
    /**
     * Run the database seeds.
     *
     * @return void
     */
    public function run()
    {
        DB::table('users')->insert([
            'name' => 'John Doe',
            'email' => 'johndoe@example.com',
            'password' => password('password'),
        ]);
    }
}
```

To run the seeder and populate the database with the data defined in the seeder class, you can use the `db:seed` command:

```bash
php artisan db:seed --class=UsersSeeder
```

This will execute the `run` method of the `UsersSeeder` class and insert the specified data into the `users` table.

## Using Model Factories

Model factories in **Tonka** allow you to define a pattern for generating fake data for your models. This is particularly useful for testing and seeding your database with realistic data.

To create a model factory, you can use the `make:factory` command. For example, to create a factory for the `User` model, you would run the following command:

```bash
php artisan make:factory UserFactory
```

This command will generate a new factory class in the `database/factories` directory. You can then define the default set of attributes for the model in this class. Here is an example of what the `UserFactory` class might look like:

```php
<?php

namespace Database\Factories;

use Clicalmani\Database\Factory\Factory;
use App\Models\User;

class UserFactory extends Factory
{
    /**
     * The name of the factory's corresponding model.
     *
     * @var string
     */
    protected $model = User::class;

    /**
     * Define the model's default state.
     *
     * @return array
     */
    public function definition()
    {
        return [
            'name' => $this->faker->name,
            'email' => $this->faker->unique()->safeEmail,
            'password' => password('password'),
        ];
    }
}
```

Once you have defined your factory, you can use it in your seeders to generate and insert multiple records into the database. Here is an example of how you can use the `UserFactory` in the `UsersSeeder` class:

```php
<?php

namespace Database\Seeders;

use Clicalmani\Database\Seeders\Seeder;
use App\Models\User;

class UsersSeeder extends Seeder
{
    /**
     * Run the database seeds.
     *
     * @return void
     */
    public function run()
    {
        User::seed()
            ->count(50)
            ->make();
    }
}
```

In this example, the `run` method uses the `User` model's factory to create 50 user records and insert them into the database.
